static_resources:
  listeners:
  - address:
      socket_address:
        address: 0.0.0.0
        port_value: 443
    listener_filters:
    - name: "envoy.listener.tls_inspector"
      typed_config: {}
    filter_chains:
    - filter_chain_match:
        server_names:
        - "1.service.test"
      filters:
      - name: envoy.tcp_proxy
        typed_config:
          "@type": "type.googleapis.com/envoy.config.filter.network.tcp_proxy.v2.TcpProxy"
          stat_prefix: "tcp_proxy_service1"
          cluster: service1
    - filter_chain_match:
        server_names:
        - "2.service.test"
      filters:
      - name: envoy.tcp_proxy
        typed_config:
          "@type": "type.googleapis.com/envoy.config.filter.network.tcp_proxy.v2.TcpProxy"
          stat_prefix: "tcp_proxy_service2"
          cluster: service2
  clusters:
  - name: service1
    type: strict_dns
    lb_policy: round_robin
    connect_timeout: "0.250s"
    hosts:
    - socket_address:
        address: 1.service.test
        port_value: 443
  - name: service2
    type: strict_dns
    lb_policy: round_robin
    connect_timeout: "0.250s"
    hosts:
    - socket_address:
        address: 2.service.test
        port_value: 443
admin:
  access_log_path: "/dev/null"
  address:
    socket_address:
      address: 0.0.0.0
      port_value: 8001
